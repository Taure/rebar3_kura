{erl_opts, [debug_info]}.

{deps, [
    {kura, "~> 0.4"}
]}.

{profiles, [
    {test, [
        {deps, [
            {meck, "0.9.2"},
            {proper, "1.4.0"}
        ]}
    ]}
]}.

{project_plugins, [erlfmt, rebar3_hex, rebar3_ex_doc]}.

{erlfmt, [write]}.

{xref_checks, [
    undefined_function_calls,
    undefined_functions,
    locals_not_used,
    deprecated_function_calls,
    deprecated_functions
]}.

%% rebar3 APIs are provided by the host at runtime, not at compile time
{xref_ignores, [
    {providers, create, 1},
    {rebar_api, abort, 2},
    {rebar_api, info, 2},
    {rebar_app_info, dir, 1},
    {rebar_app_info, name, 1},
    {rebar_state, add_provider, 2},
    {rebar_state, all_deps, 1},
    {rebar_state, current_app, 1},
    {rebar_state, command_parsed_args, 1},
    {rebar_state, project_apps, 1}
]}.

{dialyzer, [
    {warnings, [
        error_handling,
        unmatched_returns
    ]},
    {plt_extra_apps, [kura]},
    {exclude_mods, [rebar3_kura, rebar3_kura_compile, rebar3_kura_setup]}
]}.

{hex, [
    {doc, #{provider => ex_doc}}
]}.

{ex_doc, [
    {source_url, <<"https://github.com/Taure/rebar3_kura">>},
    {extras, [
        <<"README.md">>,
        <<"CHANGELOG.md">>,
        <<"LICENSE">>
    ]},
    {main, <<"README.md">>},
    {homepage_url, <<"https://github.com/Taure/rebar3_kura">>},
    {api_reference, true}
]}.
